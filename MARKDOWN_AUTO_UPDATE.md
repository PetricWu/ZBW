# 自动更新中标公告使用说明

## 功能说明

网站现在支持自动读取 `markdown/` 文件夹中的所有 Markdown 文件，无需手动维护 `index.json` 文件。

## 如何使用

### 1. 添加新的中标公告

在 `markdown/` 文件夹中创建新的 Markdown 文件，例如：

```
markdown/
├── 某市医院建设项目中标公告.md
├── 城市轨道交通工程中标公告.md
├── 智慧校园建设项目中标公示.md
└── ...
```

### 2. 文件格式规范

每个 Markdown 文件应该包含以下元数据：

```markdown
<!-- title: 文章标题 | keywords: 关键词1,关键词2,关键词3 | description: 文章描述 -->

# 文章标题

文章内容...
```

**字段说明：**
- `title`: 文章标题（建议20-30个中文字符）
- `keywords`: 关键词（建议5个以内）
- `description`: 文章描述（建议80-120个中文字符）

### 3. 自动分类

系统会根据文件名自动分类文章：

| 文件名关键词 | 分类 |
|-------------|------|
| 中标公告、中标公示、公示、公告 | 中标公告 |
| 政策、解读、法规、法律、条例 | 政策解读 |
| 流程、指南、操作、教程 | 招标流程 |
| 技巧、注意、方法、策略 | 投标技巧 |

如果文件名不匹配任何关键词，则归类为"其他"。

### 4. 自动排序

文章会按照最后修改时间自动排序，最新的文章显示在最前面。

## 工作原理

1. **启动服务器时**：自动扫描 `markdown/` 文件夹中的所有 `.md` 文件
2. **解析元数据**：从每个文件中提取标题、关键词、描述等信息
3. **生成索引**：自动生成 `markdown/index.json` 文件
4. **前端加载**：网页从 `index.json` 中读取文章列表

## 与 GitHub 集成

### 在 GitHub 上更新

1. 将新的 Markdown 文件上传到 GitHub 仓库的 `markdown/` 文件夹
2. 提交并推送更改
3. 网站会自动更新（根据你的部署方式）

### 本地开发

在本地开发时，每次启动服务器都会自动重新生成索引：

```bash
# 开发环境
coze dev

# 或手动运行生成脚本
python3 generate_index.py
```

## 示例文件

### 中标公告示例

```markdown
<!-- title: 某市医院建设项目中标公告 | keywords: 中标公告,医院建设,招标代理 | description: 某市医院建设项目中标公告，公示中标单位及中标金额，确保招标过程的透明度和公正性。 -->

# 某市医院建设项目中标公告

**项目名称**：某市中心医院新建住院大楼工程

**招标编号**：HZ-2024-001

**公告日期**：2024年1月15日

## 中标单位信息

| 项目 | 内容 |
|------|------|
| 中标单位 | 华建建筑工程有限公司 |
| 统一社会信用代码 | 91110000123456789X |
| 法定代表人 | 张某某 |
| 注册地址 | 北京市朝阳区建国路88号 |

## 中标金额

**中标金额**：人民币 8,500 万元（大写：捌仟伍佰万元整）

---

**华诚招标代理有限公司**
**2024年1月15日**
```

## 注意事项

1. **文件命名**：使用中文文件名时，确保文件名能够正确编码
2. **日期格式**：文章日期会自动从 Git 提交记录或文件系统时间戳获取
3. **性能优化**：索引文件会在每次启动时重新生成，不会影响服务器性能
4. **SEO优化**：确保每篇文章都有完整的元数据（title、keywords、description）

## 技术细节

- **索引生成脚本**：`generate_index.py`
- **配置文件**：`.coze`（自动在启动时运行生成脚本）
- **索引文件**：`markdown/index.json`
- **前端加载**：`js/main.js` 中的 `loadMarkdownList()` 函数

## 故障排查

### 问题：文章没有显示

**解决方案**：
1. 确认文件在 `markdown/` 文件夹中
2. 确认文件扩展名为 `.md`
3. 检查文件是否有正确的元数据注释
4. 运行 `python3 generate_index.py` 手动生成索引
5. 检查 `markdown/index.json` 是否包含该文章

### 问题：分类不正确

**解决方案**：
1. 检查文件名是否包含正确的关键词
2. 修改文件名或更新 `generate_index.py` 中的分类规则

### 问题：日期不正确

**解决方案**：
- 如果使用 Git：确保文件已提交，日期会从 Git 提交记录获取
- 如果未使用 Git：日期会从文件系统时间戳获取

## 相关文件

- `generate_index.py` - 索引生成脚本
- `markdown/` - Markdown 文件存储目录
- `markdown/index.json` - 自动生成的文章索引
- `.coze` - 项目配置文件
- `js/main.js` - 前端加载逻辑

---

如有问题，请查看日志文件：`/app/work/logs/bypass/dev.log`
