# Netlify Functions é”™è¯¯ä¿®å¤ - Markdown ç›®å½•ä¸å­˜åœ¨

## ğŸ”´ é—®é¢˜

**é”™è¯¯ä¿¡æ¯**ï¼š
```json
{
  "success": false,
  "message": "Markdown ç›®å½•ä¸å­˜åœ¨: markdown",
  "error": "æ›´æ–°æ–‡ç« ç´¢å¼•å¤±è´¥"
}
```

**ç—‡çŠ¶**ï¼š
- è®¿é—® `/api/update-index` è¿”å›é”™è¯¯
- Netlify Functions æ— æ³•æ‰¾åˆ° markdown ç›®å½•

---

## ğŸ” é—®é¢˜åŸå› 

**æ ¹æœ¬åŸå› **ï¼š
Netlify Functions è¿è¡Œåœ¨éš”ç¦»çš„ç¯å¢ƒä¸­ï¼Œé»˜è®¤åªèƒ½è®¿é—®è‡ªå·±çš„ç›®å½•ï¼ˆ`netlify/functions/`ï¼‰ï¼Œæ— æ³•è®¿é—®é¡¹ç›®æ ¹ç›®å½•çš„ `markdown/` æ–‡ä»¶å¤¹ã€‚

**Netlify Functions çš„æ–‡ä»¶ç³»ç»Ÿéš”ç¦»**ï¼š
```
é¡¹ç›®æ ¹ç›®å½• (ä¸å¯è®¿é—®)
â”œâ”€â”€ markdown/         âŒ Functions æ— æ³•è®¿é—®
â”œâ”€â”€ css/
â””â”€â”€ index.html

netlify/functions/    âœ… Functions å¯ä»¥è®¿é—®
â”œâ”€â”€ update-index.js
â”œâ”€â”€ contact.js
â””â”€â”€ markdown/         âœ… è¿™é‡Œæ˜¯ Functions å¯ä»¥è®¿é—®çš„ä½ç½®
    â”œâ”€â”€ *.md
    â””â”€â”€ index.json
```

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æ„å»ºè„šæœ¬åŒæ­¥ç›®å½•ï¼ˆæ¨èï¼‰â­

**åŸç†**ï¼š
åœ¨éƒ¨ç½²å‰ï¼Œå°† `markdown/` ç›®å½•çš„æ–‡ä»¶å¤åˆ¶åˆ° `netlify/functions/markdown/` ç›®å½•ã€‚

#### Step 1: æ„å»ºè„šæœ¬å·²åˆ›å»º

`build.sh` è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. åˆ›å»º `netlify/functions/markdown` ç›®å½•
2. å¤åˆ¶æ‰€æœ‰ `.md` æ–‡ä»¶
3. å¤åˆ¶ `index.json` æ–‡ä»¶
4. æ˜¾ç¤ºå¤åˆ¶ç»Ÿè®¡ä¿¡æ¯

#### Step 2: netlify.toml å·²é…ç½®

```toml
[build]
  publish = "."
  command = "bash build.sh"  # éƒ¨ç½²å‰æ‰§è¡Œæ„å»ºè„šæœ¬
```

#### Step 3: Functions å·²æ›´æ–°

`netlify/functions/update-index.js` ç°åœ¨ä½¿ç”¨ï¼š
```javascript
const markdownDir = path.join(__dirname, 'markdown');
const indexFilePath = path.join(markdownDir, 'index.json');
```

#### Step 4: éªŒè¯ä¿®å¤

1. ä¸‹è½½æœ€æ–°å‹ç¼©åŒ…
2. ä¸Šä¼ åˆ° GitHub
3. ç­‰å¾… Netlify è‡ªåŠ¨éƒ¨ç½²
4. è®¿é—® `/api/update-index`
5. åº”è¯¥è¿”å›æˆåŠŸå“åº”

---

## ğŸ“¦ æœ€æ–°å‹ç¼©åŒ…

**æ–‡ä»¶å**ï¼š`tender-website.tar.gz`
**å¤§å°**ï¼šçº¦ 204KB
**ç‰ˆæœ¬**ï¼šv3.6

**æ–°å¢å†…å®¹**ï¼š
- âœ… `build.sh` - Netlify æ„å»ºè„šæœ¬
- âœ… `netlify/functions/markdown/` - Functions å¯è®¿é—®çš„ markdown ç›®å½•
- âœ… æ›´æ–°çš„ `netlify.toml` - é…ç½®æ„å»ºå‘½ä»¤
- âœ… æ›´æ–°çš„ `update-index.js` - ä½¿ç”¨æ­£ç¡®çš„è·¯å¾„

---

## ğŸ” éªŒè¯ä¿®å¤

### 1. æ£€æŸ¥æ„å»ºè„šæœ¬

```bash
# è¿è¡Œæ„å»ºè„šæœ¬
./build.sh
```

åº”è¯¥çœ‹åˆ°ï¼š
```
==========================================
Netlify éƒ¨ç½²å‰æ„å»º
==========================================
ğŸ“ åˆ›å»º netlify/functions/markdown ç›®å½•...
ğŸ“‹ å¤åˆ¶ markdown æ–‡ä»¶åˆ° Functions ç›®å½•...
âœ… Markdown æ–‡ä»¶å·²å¤åˆ¶
ğŸ“Š å·²å¤åˆ¶ 8 ä¸ª markdown æ–‡ä»¶

ğŸ“ Functions ç›®å½•ä¸­çš„ markdown æ–‡ä»¶ï¼š
-rw-r--r-- 1 root root 1641 Feb  2 16:05 åŸå¸‚è½¨é“äº¤é€šå·¥ç¨‹ä¸­æ ‡å…¬å‘Š.md
-rw-r--r-- 1 root root 8400 Feb  2 16:05 å·¥ç¨‹æ‹›æ ‡æµç¨‹å…¨è§£æ.md
...

==========================================
æ„å»ºå®Œæˆ âœ…
==========================================
```

### 2. æµ‹è¯• Functions

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ï¼š
```
https://ä½ çš„ç½‘ç«™.netlify.app/api/update-index
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": true,
  "message": "æˆåŠŸæ›´æ–°æ–‡ç« ç´¢å¼•ï¼Œå…± 8 ç¯‡æ–‡ç« ",
  "data": {
    "total": 8,
    "lastUpdated": "2026-02-02T08:00:00.000Z",
    "categories": {
      "æ”¿ç­–è§£è¯»": 2,
      "æ‹›æ ‡æµç¨‹": 2,
      "ä¸­æ ‡å…¬å‘Š": 2,
      "æŠ•æ ‡æŠ€å·§": 1,
      "å…¶ä»–": 1
    },
    "articles": [...]
  }
}
```

### 3. æ£€æŸ¥æ–‡ç« åˆ—è¡¨

è®¿é—®æ–‡ç« åˆ—è¡¨é¡µï¼š
```
https://ä½ çš„ç½‘ç«™.netlify.app/articles.html
```

åº”è¯¥æ­£å¸¸æ˜¾ç¤ºæ‰€æœ‰æ–‡ç« ã€‚

---

## ğŸ’¡ å·¥ä½œåŸç†

### éƒ¨ç½²æµç¨‹

```
1. ç”¨æˆ·æ¨é€ä»£ç åˆ° GitHub
   â†“
2. Netlify æ£€æµ‹åˆ°æ–°çš„æäº¤
   â†“
3. æ‰§è¡Œæ„å»ºå‘½ä»¤: bash build.sh
   â†“
4. build.sh è„šæœ¬:
   - åˆ›å»º netlify/functions/markdown/
   - å¤åˆ¶ markdown/*.md åˆ° netlify/functions/markdown/
   - å¤åˆ¶ markdown/index.json åˆ° netlify/functions/markdown/
   â†“
5. éƒ¨ç½²å®Œæˆ
   â†“
6. Functions å¯ä»¥è®¿é—® netlify/functions/markdown/
```

### æ–‡ä»¶è®¿é—®

```
å‰ç«¯è¯»å–ï¼ˆé™æ€æ–‡ä»¶ï¼‰:
  /markdown/index.json â†’ markdown/index.json

Functions è®¿é—®ï¼ˆè¿è¡Œæ—¶ï¼‰:
  netlify/functions/markdown/index.json â†’ Functions å¯è®¿é—®
```

---

## ğŸ“Š ç›®å½•ç»“æ„å¯¹æ¯”

### ä¿®å¤å‰
```
é¡¹ç›®/
â”œâ”€â”€ markdown/
â”‚   â”œâ”€â”€ *.md (8ä¸ªæ–‡ä»¶)
â”‚   â””â”€â”€ index.json
â””â”€â”€ netlify/functions/
    â”œâ”€â”€ update-index.js  âŒ æ— æ³•è®¿é—® markdown/
    â””â”€â”€ contact.js
```

### ä¿®å¤å
```
é¡¹ç›®/
â”œâ”€â”€ markdown/
â”‚   â”œâ”€â”€ *.md (8ä¸ªæ–‡ä»¶)
â”‚   â””â”€â”€ index.json
â””â”€â”€ netlify/functions/
    â”œâ”€â”€ update-index.js  âœ… å¯ä»¥è®¿é—® markdown/
    â”œâ”€â”€ contact.js
    â””â”€â”€ markdown/         âœ… å¤åˆ¶çš„æ–‡ä»¶
        â”œâ”€â”€ *.md (8ä¸ªæ–‡ä»¶)
        â””â”€â”€ index.json
```

---

## ğŸ¯ é¢„æœŸç»“æœ

ä¿®å¤åï¼š

| åŠŸèƒ½ | çŠ¶æ€ |
|------|------|
| `/api/update-index` | âœ… æ­£å¸¸å·¥ä½œ |
| `/api/contact` | âœ… æ­£å¸¸å·¥ä½œ |
| æ–‡ç« åˆ—è¡¨ | âœ… æ­£å¸¸æ˜¾ç¤º |
| æ–‡ç« è¯¦æƒ… | âœ… æ­£å¸¸åŠ è½½ |
| è‡ªåŠ¨æ›´æ–° | âœ… Functions å¯ä»¥æ›´æ–° |

---

## ğŸš€ ç«‹å³éƒ¨ç½²

### Step 1: ä¸‹è½½æœ€æ–°å‹ç¼©åŒ…

ä¸‹è½½ `tender-website.tar.gz`

### Step 2: è§£å‹å¹¶ä¸Šä¼ 

```bash
tar -xzf tender-website.tar.gz
cd tender-website

# ä½¿ç”¨ Git ä¸Šä¼ 
git add .
git commit -m "fix: add build script to sync markdown files for Netlify Functions"
git push
```

### Step 3: ç­‰å¾…éƒ¨ç½²

Netlify ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æ–°çš„æäº¤å¹¶é‡æ–°éƒ¨ç½²ï¼ˆ1-2åˆ†é’Ÿï¼‰

### Step 4: éªŒè¯

è®¿é—®ï¼š
- `/api/update-index` - åº”è¯¥è¿”å›æˆåŠŸ
- `/articles.html` - åº”è¯¥æ­£å¸¸æ˜¾ç¤ºæ–‡ç« åˆ—è¡¨

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´æ•™ç¨‹.md](./å®Œæ•´æ•™ç¨‹.md) - å®Œæ•´éƒ¨ç½²æ•™ç¨‹
- [NETLIFY_FUNCTIONS_GUIDE.md](./NETLIFY_FUNCTIONS_GUIDE.md) - Functions è¯¦ç»†æŒ‡å—
- [GitHubéƒ¨ç½²é—®é¢˜-å¿«é€Ÿä¿®å¤.md](./GitHubéƒ¨ç½²é—®é¢˜-å¿«é€Ÿä¿®å¤.md) - GitHub éƒ¨ç½²é—®é¢˜

---

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆ Functions ä¸èƒ½è®¿é—®é¡¹ç›®æ ¹ç›®å½•ï¼Ÿ

**A**: Netlify Functions è¿è¡Œåœ¨éš”ç¦»çš„ Lambda ç¯å¢ƒä¸­ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œåªèƒ½è®¿é—®è‡ªå·±çš„ç›®å½•ã€‚è¿™æ˜¯äº‘å‡½æ•°çš„å¸¸è§é™åˆ¶ã€‚

### Q2: å¦‚æœä¸ä½¿ç”¨æ„å»ºè„šæœ¬ä¼šæ€æ ·ï¼Ÿ

**A**: Functions ä¼šæŠ¥é”™ "Markdown ç›®å½•ä¸å­˜åœ¨: markdown"ï¼Œå› ä¸ºæ— æ³•æ‰¾åˆ° markdown æ–‡ä»¶å¤¹ã€‚

### Q3: ä¸ºä»€ä¹ˆä¸ç›´æ¥ä» API è¯»å–æ–‡ç« åˆ—è¡¨ï¼Ÿ

**A**: é™æ€ JSON æ–‡ä»¶æ›´é€‚åˆï¼š
- å‡å°‘æœåŠ¡å™¨è´Ÿè½½
- æé«˜ç¼“å­˜å‘½ä¸­ç‡
- æ”¯æŒç¦»çº¿è®¿é—®
- æå‡é¡µé¢åŠ è½½é€Ÿåº¦

### Q4: å¦‚ä½•ç¡®ä¿ä¸¤ä¸ªç›®å½•åŒæ­¥ï¼Ÿ

**A**: æ„å»ºè„šæœ¬ä¼šåœ¨æ¯æ¬¡éƒ¨ç½²å‰è‡ªåŠ¨å¤åˆ¶æ–‡ä»¶ï¼Œç¡®ä¿ä¸¤ä¸ªç›®å½•å®Œå…¨åŒæ­¥ã€‚

---

## ğŸ‰ æ€»ç»“

âœ… **é—®é¢˜å·²è¯Šæ–­**
âœ… **æ ¹æœ¬åŸå› å·²æ‰¾åˆ°**
âœ… **è§£å†³æ–¹æ¡ˆå·²å®ç°**
âœ… **æ„å»ºè„šæœ¬å·²åˆ›å»º**
âœ… **é…ç½®å·²æ›´æ–°**

**é—®é¢˜**ï¼šFunctions æ— æ³•è®¿é—®é¡¹ç›®æ ¹ç›®å½•çš„ markdown æ–‡ä»¶å¤¹
**è§£å†³æ–¹æ³•**ï¼šä½¿ç”¨æ„å»ºè„šæœ¬åŒæ­¥æ–‡ä»¶åˆ° Functions ç›®å½•
**é¢„æœŸç»“æœ**ï¼šFunctions æ­£å¸¸å·¥ä½œï¼Œå¯ä»¥æ›´æ–°æ–‡ç« ç´¢å¼•

---

**ä¸‹è½½æœ€æ–°å‹ç¼©åŒ…**ï¼š`tender-website.tar.gz`

**ç«‹å³éƒ¨ç½²**ï¼šä¸Šä¼ åˆ° GitHubï¼ŒNetlify ä¼šè‡ªåŠ¨æ‰§è¡Œæ„å»ºè„šæœ¬å¹¶éƒ¨ç½²ï¼

---

**ç‰ˆæœ¬**: v3.6 - Functions é”™è¯¯ä¿®å¤
**æ—¥æœŸ**: 2026å¹´2æœˆ2æ—¥
**çŠ¶æ€**: å·²è§£å†³
